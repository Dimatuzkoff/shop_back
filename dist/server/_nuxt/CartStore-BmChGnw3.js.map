{"version":3,"file":"CartStore-BmChGnw3.js","sources":["../../../../stores/CartStore.ts"],"sourcesContent":["import { defineStore } from 'pinia';\nimport apiService from '@/services/api';\nimport type { RegisterData } from '@/types/registerData';\nimport type { LoginData } from '@/types/loginData';\nimport type { userData } from '@/types/userData';\nimport type { dtoResponse } from '@/types/dtoResponse.ts';\nimport type { ProductData } from '../../types/productData';\n\nexport const useCartStore = defineStore('cart', {\n    state: () => ({\n        currentCart: [],\n    }),\n    actions: {\n        addProductToCart(product: ProductData) {\n            this.currentCart.push({\n                product: product,\n                quantity: 1\n            })\n\n\n        },\n        deleteProduct(id: string) {\n            this.currentCart = this.currentCart.filter(item => item.product._id !== id)\n        },\n        async addOrder(contacts: { username: string, phone: string, email: string }, delivery: { city: string, department: string }) {\n            const order = {\n                products: this.currentCart,\n                totalPrice: this.totalPrice,\n                guestContact: contacts,\n                delivery\n            }\n\n            return await apiService.postOrder(order)\n\n        },\n        async getOrders() {\n            return await apiService.getOrders();\n        },\n        async getOrder() {\n            return await apiService.getOrder();\n        }\n    },\n    getters: {\n        totalPrice: (state) => {\n            return state.currentCart.reduce((acum, elem) => {\n                return acum + elem.product.price * elem.quantity;\n            }, 0);\n        }\n    },\n\n});\n\n"],"names":[],"mappings":";AAQa,MAAA,eAAe,YAAY,QAAQ;AAAA,EAC5C,OAAO,OAAO;AAAA,IACV,aAAa,CAAC;AAAA,EAAA;AAAA,EAElB,SAAS;AAAA,IACL,iBAAiB,SAAsB;AACnC,WAAK,YAAY,KAAK;AAAA,QAClB;AAAA,QACA,UAAU;AAAA,MAAA,CACb;AAAA,IAGL;AAAA,IACA,cAAc,IAAY;AACjB,WAAA,cAAc,KAAK,YAAY,OAAO,UAAQ,KAAK,QAAQ,QAAQ,EAAE;AAAA,IAC9E;AAAA,IACA,MAAM,SAAS,UAA8D,UAAgD;AACzH,YAAM,QAAQ;AAAA,QACV,UAAU,KAAK;AAAA,QACf,YAAY,KAAK;AAAA,QACjB,cAAc;AAAA,QACd;AAAA,MAAA;AAGG,aAAA,MAAM,WAAW,UAAU,KAAK;AAAA,IAE3C;AAAA,IACA,MAAM,YAAY;AACP,aAAA,MAAM,WAAW;IAC5B;AAAA,IACA,MAAM,WAAW;AACN,aAAA,MAAM,WAAW;IAC5B;AAAA,EACJ;AAAA,EACA,SAAS;AAAA,IACL,YAAY,CAAC,UAAU;AACnB,aAAO,MAAM,YAAY,OAAO,CAAC,MAAM,SAAS;AAC5C,eAAO,OAAO,KAAK,QAAQ,QAAQ,KAAK;AAAA,SACzC,CAAC;AAAA,IACR;AAAA,EACJ;AAEJ,CAAC;"}