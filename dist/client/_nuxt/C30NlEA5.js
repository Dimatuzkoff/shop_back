import{S as q,J as A,G as F,x as M,o as u,K as d,w as r,H as l,V as k,U as D,d as g,O as P,b as a,t as S,Z as N,a as y,$,_ as J,n as z,Q as H,s as O,v as Q,u as Y,r as Z,h as E,T as K,z as G,F as I,aJ as X,B,br as ee,ae as te,bs as re,M as j,a2 as ae,ag as se,c as b,L as T,W as oe,Y as R,N as ce,p as le,e as ie}from"./dlBUJPxP.js";import{u as ue}from"./DYHMA_ZV.js";import{V as v,a as V}from"./4c4Tojpe.js";import{c as ne}from"./BahAKmWJ.js";import{m as de,V as L,a as me,b as W}from"./BaXzzKG1.js";import{V as _e}from"./DOYfp3UE.js";import"./BtsD_yie.js";const fe=["disabled"],pe=q({__name:"DiscountedPrice",setup(e){const h=ue(),s=A(),t=F(),C=M(()=>Math.floor(t.currentProduct.price+(t.currentProduct.price*Math.random()*.3+.1))),m=M(()=>h.currentCart.some(f=>f.product._id===t.currentProduct._id));return(f,n)=>(u(),d(V,{class:"product__price",justify:"end"},{default:r(()=>[l(t).currentProduct.quantitiesInStore&&!m.value?(u(),d(k,{key:0,class:"product__btn",color:"primary",onClick:n[0]||(n[0]=D(p=>l(h).addProductToCart(l(t).currentProduct),["prevent"]))},{default:r(()=>[g("Купить")]),_:1})):P("",!0),l(t).currentProduct.quantitiesInStore?P("",!0):(u(),d(k,{key:1,class:"product__btn",disabled:"",color:"primary",onClick:n[1]||(n[1]=D(()=>{},["prevent"]))},{default:r(()=>[g("Товар закончился")]),_:1})),l(t).currentProduct.quantitiesInStore&&m.value?(u(),d(k,{key:2,class:"product__btn",color:"primary",onClick:n[2]||(n[2]=D(p=>l(s).drawerCart=!0,["prevent"]))},{default:r(()=>[g("Товар в корзине")]),_:1})):P("",!0),a(v,{cols:"3"},{default:r(()=>[a(V,{class:"product__price-old"},{default:r(()=>[g(S(C.value)+" грн",1)]),_:1}),a(V,{class:"product__price-current"},{default:r(()=>[N(y("input",{class:"product__price-current-input",disabled:!l(s).isEditMode,type:"text","onUpdate:modelValue":n[3]||(n[3]=p=>l(t).currentProduct.price=p)},null,8,fe),[[$,l(t).currentProduct.price]])]),_:1})]),_:1})]),_:1}))}}),ve=J(pe,[["__scopeId","data-v-6d4d040e"]]),he=z({color:String,cycle:Boolean,delimiterIcon:{type:H,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...de({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),ye=O()({name:"VCarousel",props:he(),emits:{"update:modelValue":e=>!0},setup(e,h){let{slots:s}=h;const t=Q(e,"modelValue"),{t:C}=Y(),m=Z();let f=-1;E(t,p),E(()=>e.interval,p),E(()=>e.cycle,w=>{w?p():window.clearTimeout(f)}),K(n);function n(){!e.cycle||!m.value||(f=window.setTimeout(m.value.group.next,+e.interval>0?+e.interval:6e3))}function p(){window.clearTimeout(f),window.requestAnimationFrame(n)}return G(()=>{const w=L.filterProps(e);return a(L,B({ref:m},w,{modelValue:t.value,"onUpdate:modelValue":x=>t.value=x,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:te(e.height)},e.style]}),{default:s.default,additional:x=>{let{group:o}=x;return a(I,null,[!e.hideDelimiters&&a("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[o.items.value.length>0&&a(X,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[o.items.value.map((i,_)=>{const c={id:`carousel-item-${i.id}`,"aria-label":C("$vuetify.carousel.ariaLabel.delimiter",_+1,o.items.value.length),class:["v-carousel__controls__item",o.isSelected(i.id)&&"v-btn--active"],onClick:()=>o.select(i.id,!0)};return s.item?s.item({props:c,item:i}):a(k,B(i,c),null)})]})]),e.progress&&a(ee,{class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(o.getItemIndex(t.value)+1)/o.items.value.length*100},null)])},prev:s.prev,next:s.next})}),{}}}),ge=z({...re(),...me()},"VCarouselItem"),Pe=O()({name:"VCarouselItem",inheritAttrs:!1,props:ge(),setup(e,h){let{slots:s,attrs:t}=h;G(()=>{const C=j.filterProps(e),m=W.filterProps(e);return a(W,B({class:["v-carousel-item",e.class]},m),{default:()=>[a(j,B(t,C),s)]})})}}),Ve=e=>(le("data-v-2aafa8f1"),e=e(),ie(),e),ke={class:"product__title text-center mb-4"},Ce=["disabled"],we=Ve(()=>y("h2",{style:{"text-align":"center"}},"Характеристики",-1)),xe={key:0,id:"scroll-target",class:"overflow-y-auto",style:{"max-height":"500px"}},be={class:"product__characteristic-title"},Se=["onUpdate:modelValue"],Ie={key:1,id:"scroll-target",class:"overflow-y-auto",style:{"max-height":"500px"}},Me={class:"product__characteristic-title"},Be=q({__name:"[id]",setup(e){const h=ae();se();const s=F(),t=A(),m=oe().public.apiUrl;async function f(){try{const o=h.params.id;await s.getProduct(o)}catch(o){console.error(o)}}const n=M(()=>{let o=JSON.parse(JSON.stringify(ne));for(let i in s.currentProduct.characteristics)o.forEach(_=>{_.key==i&&(_.value=s.currentProduct.characteristics[i])});return o}),p=M(()=>{let o=[];return n.value.forEach(i=>{i.value&&o.push(i)}),o});f(),K(()=>{});function w(){let o=[];o=n.value;let i={};o.forEach(_=>{_.value&&(i[_.key]=_.value)}),s.currentProduct.characteristics=i,s.editProduct(s.currentProduct),t.isEditMode=!1}function x(){t.isEditMode=!1,f()}return(o,i)=>{const _=ve;return u(),d(_e,{fluid:""},{default:r(()=>[a(V,{justify:"space-around"},{default:r(()=>[a(v,{cols:"12",md:"6"},{default:r(()=>[y("div",ke,[N(y("input",{type:"text",disabled:!l(t).isEditMode,"onUpdate:modelValue":i[0]||(i[0]=c=>l(s).currentProduct.name=c),class:"product__title-input"},null,8,Ce),[[$,l(s).currentProduct.name]])]),l(s).currentProduct.image?(u(),d(ye,{key:0,class:"product__carousel",height:"400","show-arrows":"hover",cycle:"","hide-delimiter-background":""},{default:r(()=>[(u(!0),b(I,null,T(l(s).currentProduct.image,c=>(u(),d(Pe,{class:"product__carousel-item",key:c,src:l(m)+"/"+c},null,8,["src"]))),128))]),_:1})):P("",!0),a(_)]),_:1}),a(v,{cols:"12",md:"6"},{default:r(()=>[we,l(t).isEditMode?(u(),b("div",xe,[(u(!0),b(I,null,T(n.value,c=>(u(),d(V,{class:"product__characteristic d-flex align-center",key:c.key},{default:r(()=>[a(v,{cols:"12",sm:"6"},{default:r(()=>[y("span",be,S(c.title),1)]),_:2},1024),a(v,{class:R({"product__characteristic-input--active":c.active}),cols:"12",sm:"6"},{default:r(()=>[N(y("input",{class:"product__characteristic-input",type:"text",placeholder:"Enter value","onUpdate:modelValue":U=>c.value=U},null,8,Se),[[$,c.value]]),c.active?(u(),d(ce,{key:0,onClick:U=>c.active=!1,class:"product__characteristic-close",icon:"mdi-close"},null,8,["onClick"])):P("",!0)]),_:2},1032,["class"])]),_:2},1024))),128))])):(u(),b("div",Ie,[(u(!0),b(I,null,T(p.value,c=>(u(),d(V,{class:"product__characteristic d-flex align-center",key:c},{default:r(()=>[a(v,{cols:"12",sm:"6"},{default:r(()=>[y("span",Me,S(c.title),1)]),_:2},1024),a(v,{class:R({"product__characteristic-input--active":c.active}),cols:"12",sm:"6"},{default:r(()=>[y("span",null,S(c.value),1)]),_:2},1032,["class"])]),_:2},1024))),128))]))]),_:1})]),_:1}),a(V,{justify:"space-around"},{default:r(()=>[l(t).role==="admin"&&!l(t).isEditMode?(u(),d(v,{key:0,cols:"12",md:"6",class:"d-flex justify-center"},{default:r(()=>[a(k,{onClick:i[1]||(i[1]=c=>l(t).isEditMode=!0),color:"success"},{default:r(()=>[g("Редактировать")]),_:1})]),_:1})):P("",!0),l(t).role==="admin"&&l(t).isEditMode?(u(),d(v,{key:1,cols:"12",md:"6",class:"d-flex flex-column flex-sm-row justify-space-around"},{default:r(()=>[a(k,{class:"mb-4 mb-sm-0",onClick:w,color:"success"},{default:r(()=>[g("Сохранить")]),_:1}),a(k,{onClick:x,color:"error"},{default:r(()=>[g("Отменить изменения")]),_:1})]),_:1})):P("",!0)]),_:1})]),_:1})}}}),Re=J(Be,[["__scopeId","data-v-2aafa8f1"]]);export{Re as default};
